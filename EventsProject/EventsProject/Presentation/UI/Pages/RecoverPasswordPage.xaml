<Page x:Class="EventsProject.Presentation.UI.Pages.RecoverPasswordPage"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
      xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
      xmlns:local="clr-namespace:EventsProject.Presentation.UI.Pages"
      xmlns:mah="clr-namespace:MahApps.Metro.Controls;assembly=MahApps.Metro"
      xmlns:fa="http://schemas.fontawesome.io/icons/"
      
      mc:Ignorable="d"
      Background="{StaticResource linerGradBG}"
      Title="RecoverPasswordPage">

    <!-- MAIN LAYOUT -->
    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="*"/>
            <ColumnDefinition Width="10*"/>
            <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>
        <Grid.RowDefinitions>
            <RowDefinition Height="*"/>
            <RowDefinition Height="10*"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <!-- MAIN LAYOUT - CONTENT -->
        <Border Grid.Column="1" Grid.Row="1"
                BorderBrush="{StaticResource clrSec}" BorderThickness="5">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="10*"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>
                <Grid.RowDefinitions>
                    <RowDefinition Height="2*"/>
                    <RowDefinition Height="5*"/>
                    <RowDefinition Height="5*"/>
                </Grid.RowDefinitions>

                <Grid.Background>
                    <ImageBrush ImageSource="pack://application:,,,/Resources/background.jpg" Stretch="Fill"/>
                </Grid.Background>

                <!-- MAIN LAYOUT - HEADER -->
                <TextBlock Text="Recover your password with your DNI and UserEmail. (Do not close this window during the process)"
                           Style="{StaticResource fntSbTitleTxb}" Foreground="{StaticResource clrTxt}" 
                           TextAlignment="Center" VerticalAlignment="Center" TextWrapping="Wrap" Width="580"
                           Grid.Column="1" Grid.Row="0"/>

                <Button x:Name="btnBack" Click="btnBack_Click" Grid.Column="2" Grid.Row="0" Margin="5 20">
                    <Label Content="Back" Style="{StaticResource fntSbTitle}"/>
                </Button>

                <StackPanel Orientation="Horizontal" Grid.Column="1" Grid.Row="1" VerticalAlignment="Center" HorizontalAlignment="Center">
                    <!-- MAIN LAYOUT - DNI -->
                    <StackPanel>
                        <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
                            <Label Content="Type your DNI:" Style="{StaticResource fntSbTitle}" 
                                   Foreground="{StaticResource clrTxtSec}"/>
                            <TextBox x:Name="txbDNI" Style="{StaticResource styTextBox}" MaxLength="12" ToolTip="Only digits are allowed in DNI"
                                     PreviewTextInput="txbNumber_PreviewTextInput" Width="250"/>
                        </StackPanel>

                        <Button x:Name="btnConfirmDni" Click="btnConfirmDni_Click" Width="250" HorizontalAlignment="Center" Margin="0 15 0 0">
                            <StackPanel Orientation="Horizontal">
                                <fa:FontAwesome Icon="Check" Style="{StaticResource fnaAnimatedBtn}"/>
                                <TextBlock Text="Confirm DNI" Margin="8 0 0 0"/>
                            </StackPanel>
                        </Button>
                        <Button x:Name="btnSendCode" Click="btnSendCode_Click" Width="250" HorizontalAlignment="Center" Margin="0 15 0 5">
                            <StackPanel Orientation="Horizontal">
                                <fa:FontAwesome Icon="Send" Style="{StaticResource fnaAnimatedBtn}"/>
                                <TextBlock Text="Send Code" Margin="8 0 0 0"/>
                            </StackPanel>
                        </Button>
                    </StackPanel>
                    
                    <!-- MAIN LAYOUT - EMAIL -->
                    <StackPanel VerticalAlignment="Center">
                        <Label Content="Verification code will be sent to: " HorizontalAlignment="Center" 
                               Style="{StaticResource fntSbTitle}" Foreground="{StaticResource clrTxtSec}"/>
                        <TextBlock x:Name="txbTargetEmail" HorizontalAlignment="Center" Foreground="{StaticResource clrTxt}"
                                   Style="{StaticResource fntTitleTxb}" MaxWidth="500" TextWrapping="Wrap"/>
                    </StackPanel>

                </StackPanel>
                
                <!-- MAIN LAYOUT - VERIFICATION CODE-->
                <Border Grid.Row="2" Grid.Column="1" Width="200" Height="200" CornerRadius="50" Margin="0 10" 
                        BorderThickness="2" BorderBrush="{StaticResource clrTxt}"
                        Background="{StaticResource clrMain}" HorizontalAlignment="Center" VerticalAlignment="Center">
                    <StackPanel VerticalAlignment="Center" HorizontalAlignment="Center">

                        <TextBlock Text="Verification Code:" FontWeight="Bold" FontSize="16" 
                            Foreground="{StaticResource clrTxt}" TextAlignment="Center"/>

                        <TextBox x:Name="txbVerificationCode" Width="100" Height="45" Margin="0 15 0 0"
                            MaxLength="6" Style="{StaticResource styTextBox}"
                            HorizontalContentAlignment="Center" VerticalContentAlignment="Center"
                            PreviewTextInput="txbNumber_PreviewTextInput"/>

                        <Button x:Name="btnConfirmCode" Click="btnConfirmCode_Click" Width="150" HorizontalAlignment="Center" Margin="0 15 0 0">
                            <StackPanel Orientation="Horizontal">
                                <fa:FontAwesome Icon="CheckCircle" Style="{StaticResource fnaAnimatedBtn}"/>
                                <TextBlock Text="Submit" Margin="8 0 0 0"/>
                            </StackPanel>
                        </Button>

                    </StackPanel>
                </Border>

            </Grid>

        </Border>

        <!-- MAIN LAYOUT - LOADINGSPINNER -->
        <Grid x:Name="loadingOverlay" Background="#80000000" Visibility="Hidden" Grid.Column="1" Grid.Row="1"
              HorizontalAlignment="Stretch" VerticalAlignment="Stretch" Panel.ZIndex="99">

            <StackPanel HorizontalAlignment="Center" VerticalAlignment="Center">
                <mah:ProgressRing Width="70" Height="70" Foreground="{StaticResource clrTxt}" IsActive="True"/>
                <TextBlock Text="Sending code..." Foreground="{StaticResource clrTxt}" 
                        FontSize="16" Margin="10,10,10,0" HorizontalAlignment="Center"/>
            </StackPanel>

        </Grid>

    </Grid>
</Page>